package com.bridglabz.oops.Stock1;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.JsonParseException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jackson.map.type.CollectionType;



public class util {

	private static ObjectMapper objectMapper=new ObjectMapper();
	
	public static<T> List<T> userReadvalues(String str, Class<?>cls)
			throws IOException,JsonParseException,JsonMappingException
	{
		CollectionType collection= objectMapper.getTypeFactory().constructCollectionType((Class<?extends Collection>)ArrayList.class,cls);
		return objectMapper.readValue(str, collection);		
	}

	
	public static<T> String userWriteValuesAsString(List<T>list)
		throws JsonGenerationException,JsonMappingException,IOException{
		return objectMapper.writeValueAsString(list);
	}
	public static<T>void writeToFile(String filename,List<T>list)
			throws JsonGenerationException, IOException, JsonMappingException
			{
		String jsonString=userWriteValuesAsString(list);
		writeFile(jsonString,filename);	
	}
	
	public static String readjsonFilw(String filename)
	throws IOException{
		FileReader fr = new FileReader(filename);
		BufferedReader br =new BufferedReader(fr);
		String str="";
		String line="";
		while((line= br.readLine())!=null) {
			str=str+line;
		}br.close();
		return str;
	}	
	public static void writeFile(String json,String filename)throws IOException{
		FileWriter fw = new FileWriter(filename);
		BufferedWriter bw= new BufferedWriter(fw);
		bw.write(json);
		bw.close();
	}
	
//		
//	// Function to write on to json file
//	 
//	public static void writeFile(String json, String filename) throws IOException {
//		FileWriter fw = new FileWriter(filename);
//		BufferedWriter bw = new BufferedWriter(fw);
//		bw.write(json);
//		bw.close();
//	}
//	//  Generic Function to write file
//	public static <T> void writeToFile(String filename,List<T> list) 
			//throws JsonGenerationException, JsonMappingException, IOException {
//		String jsonString = userWriteValueAsString(list);
//		writeFile(jsonString, filename);
//	}
//	

}
